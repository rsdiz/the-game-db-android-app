plugins {
    id 'com.android.library'
    id 'kotlin-android'
    id 'kotlin-kapt'
    id 'dagger.hilt.android.plugin'
    id 'kotlin-parcelize'
}

android {
    def globalConfiguration = rootProject.extensions.getByName("ext")

    compileSdkVersion globalConfiguration["androidCompileSdkVersion"]
    buildToolsVersion globalConfiguration["androidBuildToolsVersion"]

    defaultConfig {
        minSdkVersion globalConfiguration["androidMinSdkVersion"]
        targetSdkVersion globalConfiguration["androidTargetSdkVersion"]
        versionCode 1
        versionName "1.0"

        testInstrumentationRunner "androidx.test.runner.AndroidJUnitRunner"
        consumerProguardFiles "consumer-rules.pro"

        buildConfigField "String", "API_KEY", '"' + RAWG_API_KEY + '"' ?: "Define RAWG API Key Here"
    }

    buildTypes {
        release {
            minifyEnabled false
            proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
        }
    }
    compileOptions {
        sourceCompatibility JavaVersion.VERSION_1_8
        targetCompatibility JavaVersion.VERSION_1_8
    }
    kotlinOptions {
        jvmTarget = '1.8'
    }
}

dependencies {
    def coreDependencies = rootProject.ext.coreDependencies
    def testDependencies = rootProject.ext.testDependencies

    implementation coreDependencies.filetree
    implementation coreDependencies.kotlinStdlib

    api coreDependencies.roomRuntime
    kapt coreDependencies.roomCompiler
    androidTestImplementation testDependencies.roomTesting

    implementation coreDependencies.retrofit
    implementation coreDependencies.converterGson
    implementation coreDependencies.loggingInterceptor

    implementation coreDependencies.coroutinesCore
    implementation coreDependencies.coroutinesAndroid
    implementation coreDependencies.roomKtx
    api coreDependencies.lifecycleLivedataKtx

    implementation coreDependencies.daggerHilt
    implementation coreDependencies.hiltLifecycle
    kapt coreDependencies.daggerHiltCompiler
    kapt coreDependencies.hiltCompiler

    testImplementation testDependencies.junit4
}